#include <wiringPi.h>
#include <stdio.h>
#include <stdlib.h>
#include <stdint.h>

#define DHTPIN 7

void read_dht11_dat() {
  static uint8_t in = LOW;
  if (in == digitalRead(DHTPIN)) return;
  in = !in;
  if (in == HIGH) {
    printf("-");
  } else {
    printf("_");
  }
}

int main( void ) {
  printf( "Motion Sensor\n" );
  setbuf(stdout, NULL);
  if ( wiringPiSetup() == -1 ) exit( 1 );

  pinMode(DHTPIN, INPUT);

  while (1) {
    for (uint32_t i = 0; i < 1000; i++) {
      read_dht11_dat();
      delayMicroseconds(1);
    }
    // delay(1000);
  }

  return 0;
}

