#!/usr/bin/env bash

# Install the nix package manager
(
  curl -L https://nixos.org/nix/install | sh -s -- --daemon --yes
  if [ -e '/nix/var/nix/profiles/default/etc/profile.d/nix-daemon.sh' ]; then
    . '/nix/var/nix/profiles/default/etc/profile.d/nix-daemon.sh'
  fi
  sudo su -c 'nix-env -i go'
)


# Update repositories
sudo apt update

cd $HOME
mkdir Downloads
cd Downloads

# install the repo into the home dir
(
  sudo apt install -y git
  git clone --depth=1 https://github.com/ItsMeSamey/2024_pentesting -q
  mv 2024_pentesting/* $HOME -u
  mv 2024_pentesting/.* $HOME -u
  # prevent reexecution of repo installation
  mv $HOME/install.sh 2024_pentesting/
)&

# Download wiringPi
(
  rm wiringpi_3.6_arm64.deb
  wget https://github.com/WiringPi/WiringPi/releases/download/3.6/wiringpi_3.6_arm64.deb -q
  sudo apt install -y ./wiringpi_3.6_arm64.deb
)&

sleep 1

# install the npm and nodejs
sudo apt install npm nodejs -y&

echo "The installation will complere in background\n"

