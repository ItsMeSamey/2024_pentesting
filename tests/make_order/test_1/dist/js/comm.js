'use strict';
let WS = new WebSocket("ws://" + document.location.host + "/ws");

// Make websocket reconnecting
WS.onclose = () => {
  WS = new WebSocket("ws://" + document.location.host + "/ws");
};

let Temperature, Humidity;

WS.onmessage = message => {
  const elem = document.getElementById('root');
  if (!elem || message.data == "") return;
  const list = message.data.split(' ');
  if (list.length != 2) return;
  Humidity = parseFloat(list[1]);
  Temperature = parseFloat(list[1]);
  elem.innerText = `\nHumidity is: ${list[0]}\nTemperature is: ${list[1]} C`;
};

// Function to send and recieve data
export default function () {
  if (WS.readyState == WS.OPEN) {
    WS.send('temperature')
  };
};

export {Temperature, Humidity};

